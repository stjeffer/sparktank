{
  "nodes": [
    {
      "id": "na1",
      "name": "Hiring Manager",
      "description": "Confirms acceptance & start date, kicks off orchestrator.",
      "x": 60,
      "y": 160,
      "owner": "Hiring Manager",
      "type": "human",
      "ai": "none",
      "aiConfidence": 0,
      "complexity": 2,
      "valueFocus": "experience",
      "stakeholders": ["Manager", "New Hire"],
      "valueTags": ["oversight"],
      "lever": { "sees": "shared", "acts": "human", "connect": "event", "rules": "policy", "participates": "internal" },
      "manual": { "sop": "Confirm details in a single form.", "risks": "Wrong start date.", "controls": "Validation in form." },
      "agent": { "name": "", "purpose": "", "system": "", "inputs": [], "outputs": [], "guardrails": "", "examples": [] },
      "datasource": { "systemName": "", "connector": "Dataverse", "entityLogicalName": "", "keyFields": [], "policy": "read-only" },
      "thirdparty": { "vendor": "", "apiBaseUrl": "", "auth": "API Key", "sla": "", "notes": "" }
    },
    {
      "id": "na2",
      "name": "Onboarding Orchestrator",
      "description": "Coordinates HR, Payroll and IT provisioning end-to-end.",
      "x": 360,
      "y": 160,
      "owner": "People Ops",
      "type": "agent",
      "ai": "orchestrator",
      "aiConfidence": 85,
      "complexity": 3,
      "valueFocus": "efficiency",
      "stakeholders": ["HR", "Finance", "IT", "Manager"],
      "valueTags": ["automation", "visibility"],
      "lever": { "sees": "shared", "acts": "orchestrator", "connect": "event", "rules": "dynamic", "participates": "internal" },
      "agent": {
        "name": "Onboarding Orchestrator",
        "purpose": "Coordinate HR, Payroll, and IT tasks from a single trigger; track status and escalate exceptions.",
        "system": "You are an orchestrator agent. When given new hire details, create and track tasks for HR, Payroll, and IT. Enforce sequencing (HR before Payroll; Payroll before IT shipping if banking not verified). Summarize progress to the manager. Escalate on policy exceptions.",
        "inputs": ["employeeId", "fullName", "email", "startDate", "role", "location"],
        "outputs": ["hrCaseId", "payrollCaseId", "itCaseId", "statusDashboardId", "exceptionList"],
        "guardrails": "Never approve exceptions. Do not store PII beyond task context. Route legal/immigration questions to HR.",
        "examples": ["Start onboarding for employee 12345", "Show onboarding status for Ana Gomez"]
      },
      "datasource": { "systemName": "Dataverse", "connector": "Dataverse", "entityLogicalName": "ff_onboarding", "keyFields": ["employeeId"], "policy": "read-write" },
      "thirdparty": { "vendor": "", "apiBaseUrl": "", "auth": "API Key", "sla": "", "notes": "" }
    },
    {
      "id": "na3",
      "name": "HR Agent",
      "description": "Creates worker record, benefits, and compliance tasks.",
      "x": 660,
      "y": 100,
      "owner": "HR",
      "type": "agent",
      "ai": "assistant",
      "aiConfidence": 75,
      "complexity": 2,
      "valueFocus": "effectiveness",
      "stakeholders": ["HR"],
      "valueTags": ["accuracy"],
      "lever": { "sees": "shared", "acts": "orchestrator", "connect": "event", "rules": "dynamic", "participates": "internal" },
      "agent": {
        "name": "HR Setup Assistant",
        "purpose": "Create new hire in HCM, assign benefits, and launch compliance tasks.",
        "system": "You operate HCM via APIs. Validate required fields and return created record identifiers.",
        "inputs": ["employeeId", "startDate", "role", "location"],
        "outputs": ["hcmWorkerId", "benefitPackageId", "complianceTaskIds"],
        "guardrails": "Do not change compensation. Escalate if required documents are missing.",
        "examples": ["Create HR record for employee 12345 starting 2025-01-15"]
      },
      "datasource": { "systemName": "HCM", "connector": "Dataverse", "entityLogicalName": "ff_worker", "keyFields": ["hcmWorkerId"], "policy": "read-write" },
      "thirdparty": { "vendor": "", "apiBaseUrl": "", "auth": "OAuth2", "sla": "", "notes": "" }
    },
    {
      "id": "na4",
      "name": "Payroll Agent",
      "description": "Sets up payroll and validates banking and tax info.",
      "x": 660,
      "y": 220,
      "owner": "Finance",
      "type": "agent",
      "ai": "assistant",
      "aiConfidence": 75,
      "complexity": 2,
      "valueFocus": "effectiveness",
      "stakeholders": ["Payroll"],
      "valueTags": ["compliance"],
      "lever": { "sees": "shared", "acts": "orchestrator", "connect": "event", "rules": "dynamic", "participates": "internal" },
      "agent": {
        "name": "Payroll Setup Assistant",
        "purpose": "Create payroll record and validate tax and banking data.",
        "system": "Use payroll APIs to create employee, validate IBAN/ACH via verification service, and confirm tax withholding setup.",
        "inputs": ["employeeId", "hcmWorkerId", "bankToken", "taxProfile"],
        "outputs": ["payrollEmployeeId", "bankVerified", "taxSetupId"],
        "guardrails": "Never store raw account numbers; only use tokenized values. Escalate mismatches.",
        "examples": ["Create payroll profile for employee 12345 using worker 98765"]
      },
      "datasource": { "systemName": "Payroll", "connector": "Dataverse", "entityLogicalName": "ff_payrollemployee", "keyFields": ["payrollEmployeeId"], "policy": "read-write" },
      "thirdparty": { "vendor": "Plaid (example)", "apiBaseUrl": "https://api.thirdparty.example", "auth": "OAuth2", "sla": "99.9%", "notes": "Tokenized banking" }
    },
    {
      "id": "na5",
      "name": "IT Provisioning Agent",
      "description": "Creates accounts, assigns licenses, and orders equipment.",
      "x": 660,
      "y": 340,
      "owner": "IT",
      "type": "agent",
      "ai": "assistant",
      "aiConfidence": 75,
      "complexity": 2,
      "valueFocus": "experience",
      "stakeholders": ["IT", "Security"],
      "valueTags": ["speed"],
      "lever": { "sees": "shared", "acts": "orchestrator", "connect": "event", "rules": "dynamic", "participates": "internal" },
      "agent": {
        "name": "IT Provisioning Assistant",
        "purpose": "Provision identity, licenses, and hardware in one pass.",
        "system": "Create SSO/O365 accounts, assign role-based licenses, request laptop shipment, and confirm MDM enrollment.",
        "inputs": ["employeeId", "role", "location", "startDate"],
        "outputs": ["directoryUserId", "licenseSetId", "deviceOrderId"],
        "guardrails": "Never grant elevated roles without approval. Enforce geo-location hardware rules.",
        "examples": ["Provision IT for employee 12345 (role: Analyst, location: UK)"]
      },
      "datasource": { "systemName": "ITSM", "connector": "Dataverse", "entityLogicalName": "ff_itsmticket", "keyFields": ["deviceOrderId"], "policy": "read-write" },
      "thirdparty": { "vendor": "", "apiBaseUrl": "", "auth": "OAuth2", "sla": "", "notes": "" }
    }
  ],
  "connections": [
    { "from": "na1", "to": "na2", "waitMinutes": 0, "label": "Trigger" },
    { "from": "na2", "to": "na3", "waitMinutes": 5, "label": "Start HR" },
    { "from": "na2", "to": "na4", "waitMinutes": 5, "label": "Start Payroll" },
    { "from": "na2", "to": "na5", "waitMinutes": 5, "label": "Start IT" }
  ]
}
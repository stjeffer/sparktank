<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Future Snapshot — What’s Different in 12 Months?</title>
<style>
  :root{
    --bg:#0f172a;            /* slate-900 */
    --panel:#0b1226;         /* deep panel */
    --card:#111827;          /* neutral-900 */
    --ink:#e5e7eb;           /* gray-200 */
    --muted:#94a3b8;         /* slate-400 */
    --accent:#60a5fa;        /* blue-400 */
    --accent-2:#34d399;      /* green-400 */
    --yellow:#f59e0b;
    --red:#ef4444;
    --shadow: 0 8px 24px rgba(0,0,0,.35);
    --radius: 18px;
  }
  html,body{height:100%}
  body{
    margin:0;
    background: radial-gradient(1200px 600px at 70% -10%, #172554 0%, #0b1226 45%, #050816 100%);
    color:var(--ink);
    font: 16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji;
  }
  header{
    padding:28px 28px 12px;
    display:flex;gap:18px;align-items:flex-start;justify-content:space-between;flex-wrap:wrap
  }
  .title{
    max-width:900px
  }
  h1{margin:.15rem 0 .35rem;font-size:28px;letter-spacing:.2px}
  .subtitle{color:var(--muted);max-width:860px}
  .bar{display:flex;gap:10px;flex-wrap:wrap}
  button, .btn{
    background:linear-gradient(180deg,#1f2937,#111827);
    color:var(--ink);
    border:1px solid #263041;
    padding:10px 14px;border-radius:12px;
    cursor:pointer;box-shadow:var(--shadow);
    transition:transform .06s ease, border-color .2s ease, background .2s ease;
  }
  button:hover{transform:translateY(-1px);border-color:#3b82f6}
  .btn-outline{background:transparent;border-color:#334155}
  .btn-accent{background:linear-gradient(180deg,#2563eb,#1d4ed8);border-color:#3b82f6}
  .btn-green{background:linear-gradient(180deg,#10b981,#059669);border-color:#34d399}
  .grid{
    padding:8px 20px 24px; display:grid; gap:14px;
    grid-template-columns: repeat(4, minmax(260px, 1fr));
  }
  .lane{
    background:linear-gradient(180deg,#0b1226,#050a1a);
    border:1px solid #172036;border-radius:var(--radius);
    box-shadow:var(--shadow);min-height:420px;display:flex;flex-direction:column;
  }
  .lane header{
    padding:14px 14px 10px;border-bottom:1px solid #1e293b;
    align-items:center;gap:10px
  }
  .pill{display:inline-flex;align-items:center;gap:8px;
    padding:8px 12px;border-radius:999px;font-weight:600;font-size:13px}
  .p-emp{background:#0b3a2b;color:#a7f3d0;border:1px solid #14532d}
  .p-cust{background:#122b49;color:#bae6fd;border:1px solid #1e40af}
  .p-proc{background:#3b1a0b;color:#fed7aa;border:1px solid #7c2d12}
  .p-inn{background:#2b103b;color:#e9d5ff;border:1px solid #6b21a8}
  .lane .actions{margin-left:auto}
  .lane main{padding:12px;display:grid;gap:12px;grid-auto-rows:min-content}
  .note{
    background:linear-gradient(180deg,#0f172a,#0b1226);
    border:1px solid #22304a;border-radius:16px;padding:12px 12px 10px;
    position:relative;box-shadow:var(--shadow)
  }
  .note h4{margin:0 0 6px;font-size:14px}
  .meta{display:flex;gap:10px;flex-wrap:wrap;color:var(--muted);font-size:12px;margin-top:6px}
  .chip{border:1px dashed #334155;border-radius:10px;padding:2px 8px}
  .note .toolbar{position:absolute;top:8px;right:8px;display:flex;gap:6px}
  .icon-btn{
    background:#0b1226;border:1px solid #334155;color:#cbd5e1;
    width:28px;height:28px;border-radius:10px;display:grid;place-items:center;cursor:pointer
  }
  .vote{display:flex;align-items:center;gap:6px;margin-top:8px}
  .dot{width:12px;height:12px;border-radius:999px;background:var(--accent)}
  .count{font-weight:700}
  .muted{color:var(--muted)}
  .empty{opacity:.7;border:2px dashed #253047;border-radius:14px;padding:18px;text-align:center;margin:12px}
  .empty span{color:#8da2c0}
  dialog{
    border:none;border-radius:18px;max-width:640px;width:96%;
    background:linear-gradient(180deg,#0b1226,#0a0f1d);color:var(--ink);
    box-shadow:0 30px 80px rgba(0,0,0,.6);padding:0;overflow:hidden
  }
  .modal-head{padding:16px 18px;border-bottom:1px solid #1f2a3d;display:flex;justify-content:space-between;align-items:center}
  .modal-body{padding:18px}
  label{display:block;font-size:13px;margin:10px 0 6px;color:#cbd5e1}
  input[type=text], textarea, select{
    width:100%;padding:10px 12px;border-radius:12px;border:1px solid #2a3a56;background:#0c1427;color:var(--ink)
  }
  textarea{min-height:90px;resize:vertical}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .modal-foot{padding:14px 18px;border-top:1px solid #1f2a3d;display:flex;justify-content:flex-end;gap:10px}
  .hint{font-size:12px;color:var(--muted)}
  footer{
    padding:14px 20px;border-top:1px solid #172036;display:flex;gap:10px;justify-content:flex-end;position:sticky;bottom:0;background:linear-gradient(180deg,transparent,rgba(5,8,22,.75))
  }
  @media print{
    header, footer, .toolbar-global {display:none !important}
    body{background:white;color:#111}
    .lane{break-inside:avoid;border-color:#ddd;box-shadow:none}
    .note{border-color:#ccc;box-shadow:none;background:#fff}
  }
  .toolbar-global{position:sticky;top:0;z-index:10;padding:8px 20px;background:linear-gradient(180deg,rgba(10,15,29,.9),rgba(10,15,29,.6));backdrop-filter: blur(6px);border-bottom:1px solid #172036;display:flex;gap:8px}
</style>
</head>
<body>

<header>
  <div class="title">
    <h1>Future Snapshot — “What’s Different in 12 Months?”</h1>
    <div class="subtitle">
      Start with outcomes, not a slogan. In teams, imagine you’ve achieved breakthrough success. Capture <strong>what’s different</strong> for
      <em>Employees</em>, <em>Customers</em>, <em>Processes</em>, and <em>Innovation</em>. Optional: add a success metric and evidence.
      Dot-vote to surface the strongest changes. Export when done.
    </div>
  </div>
  <div class="bar">
    <button class="btn btn-accent" id="addQuick">+ Quick note</button>
    <button class="btn btn-outline" id="exportJSON">Export JSON</button>
    <button class="btn btn-outline" id="exportCSV">Export CSV</button>
    <button class="btn btn-green" onclick="window.print()">Print</button>
  </div>
</header>

<div class="toolbar-global">
  <span class="muted">Tip: Double-click a lane to add a note. Click the ● on a card to add a vote. Use the kebab menu ⋮ to edit or delete.</span>
</div>

<section class="grid" id="board">
  <!-- Lanes -->
</section>

<footer>
  <span class="muted">Facilitator: give each participant 3–5 dots for voting; encourage concrete, observable differences.</span>
</footer>

<!-- Modal -->
<dialog id="noteDialog">
  <form method="dialog" id="noteForm">
    <div class="modal-head">
      <strong id="dialogTitle">Add change</strong>
      <button class="icon-btn" value="cancel" title="Close">✕</button>
    </div>
    <div class="modal-body">
      <div class="row">
        <div>
          <label for="laneSel">Pillar</label>
          <select id="laneSel" required>
            <option value="employee">Enrich employee experiences</option>
            <option value="customer">Reinvent customer engagement</option>
            <option value="process">Reshape business processes</option>
            <option value="innovation">Bend the curve on innovation</option>
          </select>
        </div>
        <div>
          <label for="metric">How we’ll know (metric, optional)</label>
          <input id="metric" type="text" placeholder="e.g., +10% win rate, -30% cycle time" />
        </div>
      </div>

      <label for="title">What’s different? (one strong sentence)</label>
      <textarea id="title" placeholder="Example: Every employee has a Copilot that handles routine tasks so they can focus on higher-value work." required></textarea>

      <label for="evidence">Evidence / observable signal (optional)</label>
      <input id="evidence" type="text" placeholder="Ex: 70% of weekly status updates auto-generated; CSAT > 4.6" />

      <div class="hint">Keep statements concrete and observable. You can refine or edit later.</div>
    </div>
    <div class="modal-foot">
      <button class="btn btn-outline" value="cancel">Cancel</button>
      <button class="btn btn-accent" id="saveBtn" value="default">Save note</button>
    </div>
  </form>
</dialog>

<script>
  // --- Data model ---
  const lanes = [
    { key:'employee',  label:'Enrich employee experiences', pill:'p-emp' },
    { key:'customer',  label:'Reinvent customer engagement', pill:'p-cust' },
    { key:'process',   label:'Reshape business processes',   pill:'p-proc' },
    { key:'innovation',label:'Bend the curve on innovation', pill:'p-inn'  },
  ];
  let notes = [];   // {id, lane, title, metric, evidence, votes}

  // --- DOM helpers ---
  const board = document.getElementById('board');
  const dlg = document.getElementById('noteDialog');
  const form = document.getElementById('noteForm');
  const laneSel = document.getElementById('laneSel');
  const titleEl = document.getElementById('title');
  const metricEl = document.getElementById('metric');
  const evidenceEl = document.getElementById('evidence');
  let editingId = null;

  function uid(){ return Math.random().toString(36).slice(2,10); }

  function render(){
    board.innerHTML = '';
    lanes.forEach(l => {
      const laneEl = document.createElement('div');
      laneEl.className = 'lane';
      laneEl.dataset.key = l.key;
      laneEl.innerHTML = `
        <header>
          <span class="pill ${l.pill}">${l.label}</span>
          <div class="actions">
            <button class="btn btn-outline add-btn">+ Add</button>
          </div>
        </header>
        <main></main>
      `;
      const main = laneEl.querySelector('main');
      const laneNotes = notes.filter(n => n.lane===l.key);
      if(!laneNotes.length){
        const empty = document.createElement('div');
        empty.className='empty';
        empty.innerHTML = `<span>Double-click here or hit “Add” to describe what’s different for <em>${l.label.toLowerCase()}</em>.</span>`;
        main.appendChild(empty);
      } else {
        laneNotes.forEach(n => main.appendChild(renderNote(n)));
      }
      laneEl.querySelector('.add-btn').addEventListener('click',()=>openModal({lane:l.key}));
      laneEl.addEventListener('dblclick', (e)=>{
        if(e.target.closest('main')) openModal({lane:l.key});
      });
      board.appendChild(laneEl);
    });
  }

  function renderNote(n){
    const el = document.createElement('div');
    el.className = 'note';
    el.dataset.id = n.id;
    el.innerHTML = `
      <div class="toolbar">
        <button class="icon-btn edit" title="Edit">✎</button>
        <button class="icon-btn del" title="Delete">🗑</button>
      </div>
      <h4>${escapeHTML(n.title)}</h4>
      <div class="meta">
        ${n.metric ? `<span class="chip">Metric: ${escapeHTML(n.metric)}</span>`:''}
        ${n.evidence ? `<span class="chip">Evidence: ${escapeHTML(n.evidence)}</span>`:''}
      </div>
      <div class="vote">
        <div class="dot"></div>
        <button class="btn btn-outline small upvote" title="Add dot vote">+1 vote</button>
        <span class="muted">Votes:</span> <span class="count">${n.votes||0}</span>
      </div>
    `;
    el.querySelector('.upvote').addEventListener('click',()=>{
      n.votes=(n.votes||0)+1; render();
    });
    el.querySelector('.edit').addEventListener('click',()=>openModal(n));
    el.querySelector('.del').addEventListener('click',()=>{
      if(confirm('Remove this note?')){ notes = notes.filter(x=>x.id!==n.id); render(); }
    });
    return el;
  }

  function openModal(data={}){
    editingId = data.id || null;
    laneSel.value = data.lane || lanes[0].key;
    titleEl.value = data.title || '';
    metricEl.value = data.metric || '';
    evidenceEl.value = data.evidence || '';
    document.getElementById('dialogTitle').textContent = editingId ? 'Edit change' : 'Add change';
    dlg.showModal();
    setTimeout(()=>titleEl.focus(),50);
  }

  form.addEventListener('submit', (e)=>{
    e.preventDefault();
    const payload = {
      lane: laneSel.value,
      title: titleEl.value.trim(),
      metric: metricEl.value.trim(),
      evidence: evidenceEl.value.trim(),
    };
    if(!payload.title) return;
    if(editingId){
      const idx = notes.findIndex(n=>n.id===editingId);
      if(idx>-1) notes[idx] = {...notes[idx], ...payload};
    }else{
      notes.push({ id: uid(), votes:0, ...payload });
    }
    dlg.close();
    render();
  });

  // Quick add (prompts a minimal dialog)
  document.getElementById('addQuick').addEventListener('click', ()=>{
    openModal({});
  });

  // Exporters
  document.getElementById('exportJSON').addEventListener('click', ()=>{
    download('future-snapshot.json', JSON.stringify(notes,null,2));
  });
  document.getElementById('exportCSV').addEventListener('click', ()=>{
    const head = ['lane','title','metric','evidence','votes'];
    const rows = notes.map(n=>head.map(k=>csvEscape(n[k]??'')).join(','));
    download('future-snapshot.csv', head.join(',')+'\n'+rows.join('\n'));
  });

  function download(filename, text){
    const blob = new Blob([text], {type:'text/plain;charset=utf-8'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = filename;
    a.click();
    URL.revokeObjectURL(a.href);
  }

  function escapeHTML(s){ return s.replace(/[&<>"']/g,m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[m])); }
  function csvEscape(s){
    const v = String(s).replace(/"/g,'""');
    return /[",\n]/.test(v) ? `"${v}"` : v;
  }

  // Seed with a couple of examples (optional)
  notes = [
    {id:uid(), lane:'employee', title:'Every employee has a Copilot for routine tasks, freeing 2 hrs/week for higher-value work.', metric:'2 hrs/week saved per FTE', evidence:'Adoption > 70%', votes:0},
    {id:uid(), lane:'customer', title:'Service becomes proactive: issues predicted and resolved before the customer calls.', metric:'-25% inbound volume', evidence:'NPS +8', votes:0},
  ];

  render();
</script>
</body>
</html>
